# kids_agent
# 子供向けパーソナライズAIエージェント 要件定義書

## 1. 概要

本プロジェクトは、スマートフォン（iOS）と生成AIを活用し、子供1人1人に専用のAIエージェントを提供することを目的とする。エージェントは、子供の個性や学習状況に応じた会話と支援を行う。  
初期ステップでは音声ベースの対話を実現し、将来的には宿題の画像認識と解説まで対応する。

---

## 2. エージェントの役割

1. 子供の基本情報（名前、生年月日、住所、学習歴、得意・苦手科目など）を保持し、すべての応答に反映する。
2. 過去の会話履歴を一定容量まで保持。重要度に応じた優先順位管理、一定期間後の自動削除を行う。
3. 雑談相手としての役割と、日常的な「なぜ？」の問いや宿題のサポートを行う。
4. 音声でのやり取りを基本とし、将来的には図・表・動画など視覚要素による補足機能も追加。
5. 子供の声を認識して担当ユーザーを判定し、エージェント自身にも名前を持たせて呼びかけで起動できるようにする。

---

## 3. 基本情報の入力と設定

- 初期設定は保護者が行う。
- 専用の初期設定画面（iOSアプリ内）で、名前・生年月日・学年・趣味・得意/苦手科目などを入力可能にする。

---

## 4. 対象端末・対象ユーザー

- **対応端末:** iOS（iPhone, iPad）
- **対象年齢:** 2歳〜小学校6年生
- 将来的には対象年齢の拡張も検討

---

## 5. フィルタリングと安全性

- 18禁サイトおよびそれに類する質問はフィルタリングし、「その質問には答えられません」と返答する。
- 保護者による利用時間帯の設定・制限が可能。

---

## 6. 音声対応機能

- 子供からの入力は音声認識（Apple Speech Framework）を使用。
- 応答は音声合成（AVFoundation / TTS）で行う。
- 子供に適したトーンや声質の音声を選定する。

---

## 7. アーキテクチャ要件

- LLMとの接続部は抽象化し、API差し替えで ChatGPT → Gemini などに変更可能な設計とする。
- 基本情報と会話履歴は外部ストレージ（Firebase Firestore または SQLite）に保持。
- RAG（Retrieval-Augmented Generation）やグラウンディングを活用し、文脈の一貫性を担保。

---

## 8. 技術スタック（初期ステップ想定）

| 区分 | 技術 | 備考 |
|------|------|------|
| フロントエンド | SwiftUI | iOS専用UI |
| 音声認識 | Apple Speech Framework | 音声入力 |
| 音声合成 | AVSpeechSynthesizer | 音声出力 |
| LLM API | OpenAI / Gemini / Claude | ラッパー経由で抽象化 |
| データ管理 | Firebase Firestore / SQLite | ユーザー情報と会話履歴の保存 |
| 認証 | Apple Sign In / PINコード | 保護者用 |

---

## 9. 導入ステップ

1. **ステップ1:** 音声での双方向対話。基本情報・履歴を反映した応答を実現。
2. **ステップ2:** カメラで宿題を撮影し、画像認識で正誤を判断。苦手問題の音声解説を実装。
3. **ステップ3:** 図・表・動画などマルチモーダル学習支援を実現。

---

## 10. 初期設定画面（親用UI モックアップ構成）

### Step 1: お子さまの情報
- 名前、生年月日、性別、学年

### Step 2: 興味・学習傾向
- 好きなこと・趣味
- 得意科目・苦手科目

### Step 3: 安全設定
- 不適切コンテンツフィルタ（オン/オフ）
- 利用可能時間帯の指定

---

## 11. 今後の懸念点と課題

- 子供の音声識別の精度（類似音声対応など）
- 会話履歴の容量と削除ルール設計
- 保護者によるモニタリング・操作履歴管理
